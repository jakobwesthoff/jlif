<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jlif - JSON Line Formatter for logs and data streams</title>
  <meta name="description" content="A command-line tool for scanning multi-object JSON logs and data streams, with syntax highlighting, filtering, and multi-line JSON support.">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

  <!-- Prism.js syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css" integrity="sha512-vswe+cgvic/XBoF1OcM/TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg==" crossorigin="anonymous" referrerpolicy="no-referrer">

  <!-- CSS imports in dependency order -->
  <link rel="stylesheet" href="styles/theme.css">
  <link rel="stylesheet" href="styles/base.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/utilities.css">
  <link rel="stylesheet" href="styles/layout.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container navbar-inner">
      <a href="#" class="navbar-brand">
        <span>jlif</span>
      </a>

      <ul class="navbar-nav">
        <li><a href="#demo">Demo</a></li>
        <li><a href="#quickstart">Quick Start</a></li>
        <li><a href="#docs">Docs</a></li>
      </ul>

      <div class="navbar-actions">
        <a href="https://github.com/jakobwesthoff/jlif" class="btn btn-secondary btn-sm">
          <svg class="icon-github" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          GitHub
        </a>
        <a href="#quickstart" class="btn btn-primary btn-sm">
          <svg class="icon-download" viewBox="0 0 24 24">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Quick Start
        </a>
      </div>
    </div>
  </nav>

  <main>
    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h1>jlif</h1>
        <p class="hero-subtitle"><span class="hero-subtitle-highlight">J</span>SON <span class="hero-subtitle-highlight">LI</span>NE <span class="hero-subtitle-highlight">F</span>ORMATTER</p>
        <p class="hero-tagline">
          A command-line tool for scanning multi-object JSON logs and data streams, with syntax highlighting, filtering, and multi-line JSON support.
        </p>
        <div class="hero-actions">
          <a href="#quickstart" class="btn btn-primary btn-lg">
            <svg class="icon-download" viewBox="0 0 24 24">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            Quick Start
          </a>
          <a href="https://github.com/jakobwesthoff/jlif" class="btn btn-secondary btn-lg">
            <svg class="icon-github" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            View on GitHub
          </a>
        </div>
      </div>
    </section>

    <!-- Highlights - key value props, no section title -->
    <section class="highlights">
      <div class="container">
        <div class="highlights-grid">
          <div class="highlight">
            <h3>Object-Aware Filtering</h3>
            <p>Unlike line-based grep, filters apply to entire JSON objects. Match patterns anywhere in a multi-line JSON structure and get the complete object.</p>
          </div>
          <div class="highlight">
            <h3>Mixed Content Handling</h3>
            <p>Non-JSON lines pass through unchanged or can be filtered out. Works seamlessly with messy real-world log streams.</p>
          </div>
          <div class="highlight">
            <h3>Fast Enough &amp; Readable</h3>
            <p>Handles real-world log volumes with ease. Pretty-print with syntax highlighting or compact output for piping.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Demo Section -->
    <section id="demo" class="demo">
      <div class="container">
        <div class="demo-window">
          <div class="macos-window">
            <div class="macos-window-titlebar">
              <div class="macos-window-buttons">
                <span class="macos-window-button close"></span>
                <span class="macos-window-button minimize"></span>
                <span class="macos-window-button maximize"></span>
              </div>
              <span class="macos-window-title">Terminal</span>
            </div>
            <div class="macos-window-content">
              <video autoplay loop muted playsinline>
                <source src="assets/demo.webm" type="video/webm">
                <source src="assets/demo.mp4" type="video/mp4">
                <!-- Fallback for browsers that don't support video -->
                <div class="code-block" style="margin: 0; border: none; border-radius: 0;">
                  <pre><code class="language-bash">$ echo '{"level":"info","message":"Server started"}' | jlif
{
  "level": "info",
  "message": "Server started"
}

$ tail -f app.log | jlif -f "error"
{
  "level": "error",
  "message": "Connection failed",
  "details": { "host": "db.example.com" }
}</code></pre>
                </div>
              </video>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Start Section -->
    <section id="quickstart" class="quickstart">
      <div class="container">
        <div class="quickstart-content">
          <h2>Quick Start</h2>

          <div class="tabs">
            <div class="tab-buttons">
              <button class="tab-button active" data-tab="cargo">Cargo (Recommended)</button>
              <button class="tab-button" data-tab="binary">Binary Releases</button>
              <button class="tab-button" data-tab="source">From Source</button>
            </div>
            <div class="tab-panels">
              <div class="tab-panel active" data-tab="cargo">
                <div class="code-block">
                  <pre><code class="language-bash">cargo install jlif</code></pre>
                </div>
                <div style="padding: var(--space-md) var(--space-lg); border-top: 1px solid var(--color-border);">
                  <p style="margin: 0; color: var(--color-text-muted);">
                    Available on <a href="https://crates.io/crates/jlif" style="color: var(--color-primary);">crates.io</a>
                  </p>
                </div>
              </div>
              <div class="tab-panel" data-tab="binary">
                <div style="padding: var(--space-lg); background-color: var(--color-bg-code);">
                  <p style="margin: 0 0 1rem 0;">Download pre-built binaries from GitHub Releases:</p>
                  <a href="https://github.com/jakobwesthoff/jlif/releases" class="btn btn-primary">
                    <svg class="icon-download" viewBox="0 0 24 24">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                      <polyline points="7 10 12 15 17 10"/>
                      <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    View Releases
                  </a>
                </div>
              </div>
              <div class="tab-panel" data-tab="source">
                <div class="code-block">
                  <pre><code class="language-bash">git clone https://github.com/jakobwesthoff/jlif.git
cd jlif
cargo build --release</code></pre>
                </div>
              </div>
            </div>
          </div>

          <h3>Basic Usage</h3>
          <div class="code-block">
            <pre><code class="language-bash"># Stream and format log files
tail -f app.log | jlif

# Fetch and format JSON from an API
curl -si https://randomuser.me/api/ | jlif

# Compact output for piping
cat data.jsonl | jlif -c --no-color

# Filter logs for errors
kubectl logs pod | jlif -f "error"

# Show only JSON content
docker logs container | jlif -j</code></pre>
          </div>
        </div>
      </div>
    </section>

    <!-- Documentation Section -->
    <section id="docs" class="docs">
      <div class="container">
        <div class="docs-content">
          <h2>Documentation</h2>

          <p>
            jlif reads from stdin and writes to stdout. Pipe any input containing JSON through it to get formatted, syntax-highlighted output. Non-JSON lines pass through unchanged by default.
          </p>
          <div class="code-block">
            <pre><code class="language-bash">command | jlif [OPTIONS]</code></pre>
          </div>

          <h3>CLI Options</h3>
          <div class="docs-table">
            <table class="table">
              <thead>
                <tr>
                  <th>Option</th>
                  <th>Description</th>
                  <th>Default</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>--max-lines &lt;N&gt;</code></td>
                  <td>Max lines to buffer for multi-line JSON</td>
                  <td>10</td>
                </tr>
                <tr>
                  <td><code>-f, --filter &lt;PATTERN&gt;</code></td>
                  <td>Regex filter pattern</td>
                  <td>&mdash;</td>
                </tr>
                <tr>
                  <td><code>-s, --case-sensitive</code></td>
                  <td>Case-sensitive filtering</td>
                  <td>Off</td>
                </tr>
                <tr>
                  <td><code>-v, --invert-match</code></td>
                  <td>Invert filter (show non-matching)</td>
                  <td>Off</td>
                </tr>
                <tr>
                  <td><code>-j, --json-only</code></td>
                  <td>Show only JSON content</td>
                  <td>Off</td>
                </tr>
                <tr>
                  <td><code>-c, --compact</code></td>
                  <td>Compact single-line output</td>
                  <td>Off</td>
                </tr>
                <tr>
                  <td><code>--no-color</code></td>
                  <td>Disable syntax highlighting</td>
                  <td>Off</td>
                </tr>
                <tr>
                  <td><code>-h, --help</code></td>
                  <td>Print help</td>
                  <td>&mdash;</td>
                </tr>
                <tr>
                  <td><code>-V, --version</code></td>
                  <td>Print version</td>
                  <td>&mdash;</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>Examples</h3>
          <div class="code-block">
            <pre><code class="language-bash"># Pretty-print JSON from stdin
echo '{"name":"test","value":42}' | jlif

# Filter for specific patterns (case-insensitive by default)
cat logs.jsonl | jlif -f "error|warning"

# Case-sensitive filtering
cat logs.jsonl | jlif -f "Error" -s

# Show everything except matching lines
cat logs.jsonl | jlif -f "debug" -v

# Compact output without colors (for piping)
cat data.json | jlif -c --no-color | jq '.field'

# Only show JSON, skip non-JSON lines
tail -f mixed.log | jlif -j

# Handle multi-line JSON with larger buffer
cat pretty.json | jlif --max-lines 50</code></pre>
          </div>

          <h3>Multi-line JSON Support</h3>
          <p>
            jlif automatically detects and assembles multi-line JSON objects. When a line starts with <code>{</code> or <code>[</code> but isn't valid JSON, jlif buffers subsequent lines until a complete JSON object is formed or the buffer limit is reached.
          </p>
          <div class="code-block">
            <pre><code class="language-json">{
  "event": "request",
  "data": {
    "method": "POST",
    "path": "/api/users"
  }
}</code></pre>
          </div>
          <p>
            Use <code>--max-lines</code> to adjust the buffer size for deeply nested or heavily formatted JSON. The default of 10 lines handles most cases.
          </p>

          <h3>Pass-through Behavior</h3>
          <p>
            Non-JSON content passes through unchanged by default, making jlif work well with mixed log formats:
          </p>
          <div class="code-block">
            <pre><code class="language-bash">$ cat mixed.log | jlif
2024-01-15 Starting server...
{
  "level": "info",
  "message": "Server listening on port 8080"
}
Connection established
{
  "level": "debug",
  "client": "192.168.1.1"
}</code></pre>
          </div>
          <p>
            Use <code>-j</code> / <code>--json-only</code> to suppress non-JSON lines and show only formatted JSON objects.
          </p>

          <!-- How Filtering Works -->
          <h3>How Filtering Works</h3>
          <p>
            The filter flags (<code>-f</code>, <code>-j</code>, <code>-v</code>) can be combined, and they compose in a specific way:
          </p>
          <div class="docs-table">
            <table class="table">
              <thead>
                <tr>
                  <th>Flags</th>
                  <th>Result</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>-f "error"</code></td>
                  <td>Show lines (JSON or non-JSON) containing "error"</td>
                </tr>
                <tr>
                  <td><code>-f "error" -j</code></td>
                  <td>Show only JSON objects containing "error"</td>
                </tr>
                <tr>
                  <td><code>-f "error" -v</code></td>
                  <td>Show lines NOT containing "error"</td>
                </tr>
                <tr>
                  <td><code>-j</code></td>
                  <td>Show all JSON, hide non-JSON</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h4>Regex Matching</h4>
          <p>
            The filter pattern matches against the <strong>serialized JSON string</strong>, not individual fields. This means:
          </p>
          <div class="code-block">
            <pre><code class="language-bash"># This JSON object:
{"level": "error", "message": "Connection failed"}

# Matches all of these patterns:
-f "error"           # Matches "error" in level field
-f "Connection"      # Matches in message field
-f "level.*error"    # Regex across the serialized string
-f '"level"'         # Matches the literal field name with quotes</code></pre>
          </div>
          <p>
            Filtering is case-insensitive by default. Use <code>-s</code> for case-sensitive matching.
          </p>

          <!-- Buffer Behavior -->
          <h3>Buffer Behavior</h3>
          <p>
            jlif uses a smart buffering system to handle multi-line JSON:
          </p>
          <ul>
            <li>When a line starts with <code>{</code>, <code>[</code>, or <code>"</code> but isn't valid JSON, jlif starts buffering</li>
            <li>Lines are accumulated until they form valid JSON or the buffer limit is reached</li>
            <li>If the buffer fills without forming valid JSON, the oldest lines are output as non-JSON and jlif tries to extract any valid JSON from the remaining content</li>
          </ul>
          <p>
            Use <code>--max-lines</code> to increase the buffer for deeply nested JSON. The default of 10 lines handles most structured logs.
          </p>
          <div class="callout-box">
            <h4>When to Increase --max-lines</h4>
            <p>Increase the buffer if you're processing pretty-printed JSON with many levels of nesting, or if you see JSON objects being split across multiple outputs.</p>
          </div>

          <!-- Real-World Examples -->
          <h3>Real-World Examples</h3>
          <p><strong>Kubernetes pod logs:</strong></p>
          <div class="code-block">
            <pre><code class="language-bash"># Filter for errors in a specific pod
kubectl logs -f my-pod | jlif -f "error|exception" -j

# Show only non-error logs
kubectl logs my-pod | jlif -f "error" -v

# Follow logs from multiple pods, JSON only
kubectl logs -l app=myapp -f | jlif -j</code></pre>
          </div>
          <p><strong>Docker container logs:</strong></p>
          <div class="code-block">
            <pre><code class="language-bash"># Filter docker-compose logs by service pattern
docker-compose logs -f | jlif -f "api|worker"

# Show only JSON from a specific container
docker logs -f my-container 2>&1 | jlif -j

# Exclude health check logs
docker logs my-container | jlif -f "health" -v</code></pre>
          </div>
          <p><strong>API server logs:</strong></p>
          <div class="code-block">
            <pre><code class="language-bash"># Find requests with specific status codes
tail -f /var/log/api/access.log | jlif -f '"status":5'

# Track a correlation ID across services
cat *.log | jlif -f "correlation.*abc-123"

# Show only slow requests (assuming duration field)
tail -f app.log | jlif -f '"duration":[0-9]{4,}'</code></pre>
          </div>
          <p><strong>Piping to other tools:</strong></p>
          <div class="code-block">
            <pre><code class="language-bash"># Extract specific field with jq
cat logs.jsonl | jlif -c --no-color | jq -r '.message'

# Count error types
cat logs.jsonl | jlif -f "error" -c --no-color | jq -r '.error_type' | sort | uniq -c

# Pretty-print then search with grep
cat logs.jsonl | jlif | grep -A5 "Connection failed"</code></pre>
          </div>

          <!-- Error Handling -->
          <h3>Error Handling</h3>
          <p>
            jlif handles malformed input gracefully:
          </p>
          <ul>
            <li><strong>Invalid JSON</strong>: Passed through as non-JSON text (unless <code>-j</code> is used)</li>
            <li><strong>Incomplete JSON at EOF</strong>: Buffered content is discarded if it doesn't form valid JSON</li>
            <li><strong>Invalid regex pattern</strong>: jlif exits with an error message</li>
            <li><strong>Binary data</strong>: May produce unexpected output; jlif expects UTF-8 text input</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <p class="footer-tagline">Make JSON logs readable</p>
        <p class="footer-credit">
          Made with <span class="footer-heart">&hearts;</span> by
          <a href="https://westhoffswelt.de">Jakob Westhoff</a> |
          <a href="https://crates.io/crates/jlif">crates.io</a> |
          <a href="imprint.html">Imprint/Impressum</a>
        </p>
      </div>
    </div>
  </footer>
  <!-- Prism.js syntax highlighting -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js" integrity="sha512-HiD3V4nv8fcjtouznjT9TqDNDm1EXngV331YGbfVGeKUoH+OLkRTCMzA34ecjlgSQZpdHZupdSrqHY+Hz3l6uQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-bash.min.js" integrity="sha512-whYhDwtTmlC/NpZlCr6PSsAaLOrfjVg/iXAnC4H/dtiHawpShhT2SlIMbpIhT/IL/NrpdMm+Hq2C13+VKpHTYw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-json.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- Tab switching -->
  <script>
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        const tab = button.dataset.tab;
        const tabs = button.closest('.tabs');
        tabs.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
        tabs.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        button.classList.add('active');
        tabs.querySelector(`.tab-panel[data-tab="${tab}"]`).classList.add('active');
      });
    });

    // Scroll spy for navbar
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.navbar-nav a');
    const navbar = document.querySelector('.navbar');
    // Extra 16px buffer makes sections activate slightly early for snappier feel
    const navOffset = navbar.offsetHeight + 16;

    function updateActiveNav() {
      const scrollPos = window.scrollY + navOffset;
      let currentSection = null;

      sections.forEach(section => {
        const top = section.offsetTop;
        const height = section.offsetHeight;

        if (scrollPos >= top && scrollPos < top + height) {
          currentSection = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (currentSection && link.getAttribute('href') === `#${currentSection}`) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', updateActiveNav);
    updateActiveNav();
  </script>
</body>
</html>
